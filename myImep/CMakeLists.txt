cmake_minimum_required(VERSION 3.4.1)
project(OPT)

set(CMAKE_CXX_STANDARD 17)
# TODO: need to be changed
set(LINK_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/libs/amd64)


set(UTF8PROC_INCLUDE_PATH include/utf8proc)
set(NLOHMANN_JSON_INCLUDE_PATH include)

include_directories(${CMAKE_CURRENT_SOURCE_DIR}
                    ${UTF8PROC_INCLUDE_PATH}
                    ${NLOHMANN_JSON_INCLUDE_PATH})


set(SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR})
file(GLOB SOURCES ${SOURCE_DIR}/*.cpp "${SOURCE_DIR}/*.c")

MESSAGE(CMAKE_SYSTEM_PROCESSOR: ${CMAKE_SYSTEM_PROCESSOR})

#if(CMAKE_SYSTEM_PROCESSOR MATCHES "AMD64")
add_executable(opt ${SOURCES})
set(UTF8PROC_LIBRARY "${LINK_DIRS}/libutf8proc.so.2.3.2")

#UTF8PROC
MESSAGE(UTF8PROC_LIBRARY: ${UTF8PROC_LIBRARY})
target_link_libraries(opt ${UTF8PROC_LIBRARY})
#endif()